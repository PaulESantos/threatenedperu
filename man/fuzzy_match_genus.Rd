% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/deprecated.R, R/fuzzy_match.R
\name{fuzzy_match_genus}
\alias{fuzzy_match_genus}
\title{Match Species Names to Threatened Plant List of Peru}
\usage{
fuzzy_match_genus(df, target_df = NULL)

fuzzy_match_genus(df, target_df = NULL)
}
\arguments{
\item{df}{A tibble containing the genus names to be matched.}

\item{target_df}{A tibble representing the threatened species database
containing the reference list of threatened species.}

\item{resultado}{A tibble or data frame returned by
\code{matching_threatenedperu()}, containing at least the column
\code{Matched.Name}.}

\item{threatenedperu}{A tibble or data frame with taxonomic reference
information, containing at least the columns \code{scientific_name}
and \code{taxonomic_status}.}

\item{splist}{A character vector containing the species names to be matched.}

\item{source}{Character string specifying which database version to use.
Options are:
\itemize{
  \item \code{"original"} (default): Uses the original threatened species database
  \item \code{"updated"}: Uses the updated database with synonyms
}}
}
\value{
Returns a tibble with the matched names in
Matched.Genus, Matched.Species for binomial names,
and Matched.Infraspecies for valid infra species names.

A character string reporting the number and percentage of
  names that have been taxonomically updated.

A tibble with detailed matching results including matched names, threat status,
and matching methodology information.

A tibble with two additional columns:
- fuzzy_match_genus: A logical column indicating whether the genus was
  successfully matched (`TRUE`) or not (`FALSE`).
- fuzzy_genus_dist: A numeric column representing the distance for each match.

A tibble with two additional columns:
- fuzzy_match_genus: A logical column indicating whether the genus was
  successfully matched (`TRUE`) or not (`FALSE`).
- fuzzy_genus_dist: A numeric column representing the distance for each match.
}
\description{
This function matches given species names against the internal database of threatened plant species in Peru.

This function matches given species names against the internal database of threatened
plant species in Peru. It uses a hierarchical matching strategy that includes direct
matching, genus-level matching, fuzzy matching, and suffix matching to maximize
successful matches while maintaining accuracy.

This function performs a fuzzy match of genus names against the threatened
species database using fuzzyjoin::stringdist() to account for slight
variations in spelling.

This function performs a fuzzy match of genus names against the threatened
species database using fuzzyjoin::stringdist() to account for slight
variations in spelling.
}
\details{
The function first attempts to directly match species names with exact
matches in the database (genus and specific epithet, or genus, specific
epithet, and infra species). If no exact match is found, the function
performs a fuzzy match using the fuzzyjoin package with an optimal string alignment distance of one, as implemented in stringdist.

The maximum edit distance is intentionally set to one.

The function matching_threatenedperu returns a tibble with new columns Matched.Genus, Matched.Species, and Matched.Infraspecies, containing the matched names or NA if no match was found.

Additionally, a logical column is added for each function called, allowing users to see which functions were applied to each name during the matching process. If a process column shows `NA`, the corresponding function was not called for that name because it was already matched by a preceding function.

The matching process follows a hierarchical pipeline with robust handling of
infraspecific ranks at two levels (when supported by the database).

**Ambiguous Matches:**
When multiple candidates have identical match scores (string distances), the
algorithm automatically selects the first match and issues a warning. To review
ambiguous matches for quality control, use \code{\link{get_ambiguous_matches}}
on the result object.

If multiple genera match with the same string distance (ambiguous matches),
a warning is issued and the first match is automatically selected. To
examine ambiguous matches in detail, use \code{\link{get_ambiguous_matches}}
on the result object.

If multiple genera match with the same string distance (ambiguous matches),
a warning is issued and the first match is automatically selected. To
examine ambiguous matches in detail, use \code{\link{get_ambiguous_matches}}
on the result object.
}
\examples{
\dontrun{
resultado <- matching_threatenedperu(c(
  "Haageocereus acranthus subsp. olowinskianus",
  "Tecoma estans var. velutyno",
  "Haageocereus pseudomelanostele subsp. setosus",
  "Cleistocactus pachycladus"
)) |>
  tibble::as_tibble()

check_name_update(resultado, threatenedperu)
}

Match Species Names to Threatened Plant List of Peru

\dontrun{
species_list <- c("Cattleya maxima", "Polylepis incana")
results <- matching_threatenedperu(species_list, source = "original")
}

}
\seealso{
\code{\link{is_threatened_peru}} for a simplified interface
\code{\link{get_ambiguous_matches}} to retrieve ambiguous match details

\code{\link{get_ambiguous_matches}} to retrieve ambiguous match details

\code{\link{get_ambiguous_matches}} to retrieve ambiguous match details
}
\keyword{internal}
